# SPDX-License-Identifier: AGPL-3.0-only
# SPDX-FileCopyrightText: 2024 Univention GmbH

---
# Default values for the provisioning-api.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.


## Global values
affinity: {}
environment: {}
fullnameOverride: "provisioning-dispatcher"
nameOverride: ""
nodeSelector: {}
podAnnotations: {}
podSecurityContext: {}
replicaCount: 1
securityContext: {}
tolerations: []


image:
  registry: "gitregistry.knut.univention.de"
  repository: "univention/customers/dataport/upx/provisioning-api/provisioning-dispatcher"
  imagePullPolicy: "Always"
  tag: "latest"

# -- Configuration of the dispatcher component
config:
  # -- NATS: host (required if nats.bundled == false)
  natsHost: "localhost"
  # -- NATS: port (required if nats.bundled == false)
  natsPort: 4222


## Container deployment probes
probes:
  liveness:
    enabled: true
    initialDelaySeconds: 120
    timeoutSeconds: 3
    periodSeconds: 30
    failureThreshold: 3
    successThreshold: 1

  readiness:
    enabled: true
    initialDelaySeconds: 30
    timeoutSeconds: 3
    periodSeconds: 15
    failureThreshold: 30
    successThreshold: 1


serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""


## Deployment resources
resources:
  requests:
    memory: "512Mi"
  limits:
    memory: "4Gi"

## Kubernetes Service
service:
  enabled: true
  type: "ClusterIP"
  ports:
    http:
      containerPort: 8080
      port: 80
      protocol: "TCP"

  sessionAffinity:
    enabled: false
    timeoutSeconds: 10800

nats:
  bundled: true
...
